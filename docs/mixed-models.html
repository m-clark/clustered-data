<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Clustered Data</title>
  <meta name="description" content="This document provides a brief comparison of various approaches to dealing with clustered data situations.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Clustered Data" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://m-clark.github.io/clustered-data/" />
  
  <meta property="og:description" content="This document provides a brief comparison of various approaches to dealing with clustered data situations." />
  <meta name="github-repo" content="m-clark/clustered-data/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Clustered Data" />
  
  <meta name="twitter:description" content="This document provides a brief comparison of various approaches to dealing with clustered data situations." />
  



<meta name="date" content="2018-09-16">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <link rel="shortcut icon" href="img/R.ico" type="image/x-icon">
<link rel="prev" href="fixed-effects-models.html">
<link rel="next" href="gee.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.4/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/book.css" type="text/css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class='before'><a href="./">Clustered Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#what-approach-to-use"><i class="fa fa-check"></i>What approach to use?</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#preliminaries"><i class="fa fa-check"></i>Preliminaries</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#things-to-note"><i class="fa fa-check"></i>Things to note</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path="ignore-structure.html"><a href="ignore-structure.html"><i class="fa fa-check"></i>Ignore Data Dependency</a><ul>
<li class="chapter" data-level="" data-path="ignore-structure.html"><a href="ignore-structure.html#pros"><i class="fa fa-check"></i>Pros</a></li>
<li class="chapter" data-level="" data-path="ignore-structure.html"><a href="ignore-structure.html#cons"><i class="fa fa-check"></i>Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="model-groups.html"><a href="model-groups.html"><i class="fa fa-check"></i>Model Every Group</a><ul>
<li class="chapter" data-level="" data-path="model-groups.html"><a href="model-groups.html#pros-1"><i class="fa fa-check"></i>Pros</a></li>
<li class="chapter" data-level="" data-path="model-groups.html"><a href="model-groups.html#cons-1"><i class="fa fa-check"></i>Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cluster-robust-variances.html"><a href="cluster-robust-variances.html"><i class="fa fa-check"></i>Cluster Robust Variances</a><ul>
<li class="chapter" data-level="" data-path="cluster-robust-variances.html"><a href="cluster-robust-variances.html#pros-2"><i class="fa fa-check"></i>Pros</a></li>
<li class="chapter" data-level="" data-path="cluster-robust-variances.html"><a href="cluster-robust-variances.html#cons-2"><i class="fa fa-check"></i>Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="survey.html"><a href="survey.html"><i class="fa fa-check"></i>A Survey Approach</a><ul>
<li class="chapter" data-level="" data-path="survey.html"><a href="survey.html#pros-3"><i class="fa fa-check"></i>Pros</a></li>
<li class="chapter" data-level="" data-path="survey.html"><a href="survey.html#cons-3"><i class="fa fa-check"></i>Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="fixed-effects-models.html"><a href="fixed-effects-models.html"><i class="fa fa-check"></i>Fixed Effects Models</a><ul>
<li class="chapter" data-level="" data-path="fixed-effects-models.html"><a href="fixed-effects-models.html#pros-4"><i class="fa fa-check"></i>Pros</a></li>
<li class="chapter" data-level="" data-path="fixed-effects-models.html"><a href="fixed-effects-models.html#cons-4"><i class="fa fa-check"></i>Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="mixed-models.html"><a href="mixed-models.html"><i class="fa fa-check"></i>Mixed Models</a><ul>
<li class="chapter" data-level="" data-path="mixed-models.html"><a href="mixed-models.html#pros-5"><i class="fa fa-check"></i>Pros</a></li>
<li class="chapter" data-level="" data-path="mixed-models.html"><a href="mixed-models.html#cons-5"><i class="fa fa-check"></i>Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="gee.html"><a href="gee.html"><i class="fa fa-check"></i>Generalized Estimating Equations</a><ul>
<li class="chapter" data-level="" data-path="gee.html"><a href="gee.html#pros-6"><i class="fa fa-check"></i>Pros</a></li>
<li class="chapter" data-level="" data-path="gee.html"><a href="gee.html#cons-6"><i class="fa fa-check"></i>Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="latent-growth-curves.html"><a href="latent-growth-curves.html"><i class="fa fa-check"></i>Latent Growth Curve</a><ul>
<li class="chapter" data-level="" data-path="latent-growth-curves.html"><a href="latent-growth-curves.html#pros-7"><i class="fa fa-check"></i>Pros</a></li>
<li class="chapter" data-level="" data-path="latent-growth-curves.html"><a href="latent-growth-curves.html#cons-7"><i class="fa fa-check"></i>Cons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i>Summary</a><ul>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html#fixed-effects"><i class="fa fa-check"></i>Fixed Effects</a></li>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html#variance-estimates"><i class="fa fa-check"></i>Variance estimates</a></li>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html#conclusion"><i class="fa fa-check"></i>Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a><ul>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#robust-se"><i class="fa fa-check"></i>Robust SE</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#fixed-effects-and-panel-data-models"><i class="fa fa-check"></i>Fixed effects and ‘panel’ data models</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#mixed-models-1"><i class="fa fa-check"></i>Mixed models</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#gee"><i class="fa fa-check"></i>GEE</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#growth-curve-models"><i class="fa fa-check"></i>Growth Curve Models</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#survey-analysis"><i class="fa fa-check"></i>Survey Analysis</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html#comparisonissues"><i class="fa fa-check"></i>Comparison/Issues</a></li>
</ul></li>
<li class="divider"></li>
<li class='after'">
   <a href="https://m-clark.github.io/">
      <img src="img/mc_logo.png" style="width:25%; padding:0px 0; display:block; margin: 0 auto;" alt="MC logo">
   </a>
</li>
<li class='after'">
   <div style='text-align:center'>
      <a href="https://github.com/m-clark/">
         <i class="fab fa-github fa-2x" aria-hidden="true"></i>
      </a>
   </div>
</li>
<li class='after'">
   <div style='text-align:center'>
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
         <i class="fab fa-creative-commons fa-lg"></i>
         <i class="fab fa-creative-commons-by fa-lg"></i>
         <i class="fab fa-creative-commons-sa fa-lg"></i>
      </a>
   </div>
</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Clustered Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mixed-models" class="section level1">
<h1>Mixed Models</h1>
<p><span class="emph">Mixed models</span>, also known by other names, explicitly model the random effects due to the clustering in the data. They are extremely flexible approaches that can handle crossed and nested clustering structures, as well as different residual dependency structures. In addition, they can fit within other modeling approaches that can be expressed essentially identically<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a>, allowing for even more modeling considerations. They also have a very natural extension to Bayesian estimation, and, as we will see later, an alternative ‘latent variable’ interpretation. In short, there is a lot going on here.</p>
<p>For observations <span class="math inline">\(i\)</span> nested within cluster <span class="math inline">\(c\)</span>, we can depict the model in a couple of different ways, but the following is fairly straightforward and in keeping with how the data was created. The main idea is that we have cluster specific coefficients for the intercept and time.</p>
<p><span class="math display">\[ y_{ic} = \beta_{0c} + \beta_{1c} * \mathrm{time}_{ic} + \epsilon_{ic} \]</span>
<span class="math display">\[\beta_{0c} = \beta_0 + \beta_2 * \mathrm{Treat_{c}} + \gamma_c\]</span>
<span class="math display">\[\beta_{1c} = \beta_1 + \nu_c\]</span>
<span class="math display">\[\gamma_c\sim \mathcal{N}(0, \tau^2)\]</span>
<span class="math display">\[\nu_c\sim \mathcal{N}(0, \eta^2)\]</span>
<span class="math display">\[\epsilon_{ic} \sim \mathcal{N}(0, \sigma^2)\]</span>
Putting the model together we get:</p>
<p><span class="math display">\[ y_{ic} = (\beta_0 + \gamma_c) + (\beta_1 + \nu_c) * \mathrm{time}_{ic} + \beta_2 * \mathrm{Treat_{c}} + \epsilon_{ic} \]</span>
So what we end up with conceptually is the standard linear model, but with cluster specific deviations/effects. These effects are <em>random</em> in that they are drawn from a specific distribution, in this case normal, with mean 0 and some standard deviation, which is estimated as part of the model. Recall that we specified these values at the <a href="introduction.html#preliminaries">beginning</a> though in terms of standard deviation. In addition, the cluster level effect of treatment enters the model as would any other covariate.</p>
<p>To estimate this model we’ll use the <span class="pack">nlme</span> package, as it will also allow us to easily estimate the residual correlation structure. The key part is the <code>random =</code> argument, where we note that we want random effects for the intercept and time.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">library</span>(nlme)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2">mixed_mod =<span class="st"> </span><span class="kw">lme</span>(y <span class="op">~</span><span class="st"> </span>time <span class="op">+</span><span class="st"> </span>treatment, <span class="dt">random =</span> <span class="op">~</span><span class="dv">1</span><span class="op">+</span>time<span class="op">|</span>id, <span class="dt">correlation=</span><span class="kw">corAR1</span>(<span class="dt">form=</span><span class="op">~</span>time<span class="op">|</span>id))</a></code></pre></div>
<table>
<caption>Fixed effects: y ~ time + treatment</caption>
<colgroup>
<col width="34%" />
<col width="12%" />
<col width="16%" />
<col width="9%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Value</th>
<th align="center">Std.Error</th>
<th align="center">DF</th>
<th align="center">t-value</th>
<th align="center">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>(Intercept)</strong></td>
<td align="center">0.133</td>
<td align="center">0.030</td>
<td align="center">7499</td>
<td align="center">4.448</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center"><strong>time</strong></td>
<td align="center">0.507</td>
<td align="center">0.009</td>
<td align="center">7499</td>
<td align="center">55.846</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center"><strong>treatmenttreatment</strong></td>
<td align="center">-0.425</td>
<td align="center">0.040</td>
<td align="center">2498</td>
<td align="center">-10.567</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table style="width:50%;">
<caption>Standardized Within-Group Residuals</caption>
<colgroup>
<col width="9%" />
<col width="11%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Min</th>
<th align="center">Q1</th>
<th align="center">Med</th>
<th align="center">Q3</th>
<th align="center">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">-3.2</td>
<td align="center">-0.55</td>
<td align="center">0.02</td>
<td align="center">0.55</td>
<td align="center">3.28</td>
</tr>
</tbody>
</table>
<table style="width:85%;">
<caption>Linear mixed-effects model fit by REML : y ~ time + treatment</caption>
<colgroup>
<col width="12%" />
<col width="20%" />
<col width="12%" />
<col width="38%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Observations</th>
<th align="center">Groups</th>
<th align="center">Log-restricted-likelihood</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>id</strong></td>
<td align="center">10000</td>
<td align="center">2500</td>
<td align="center">-12630</td>
</tr>
</tbody>
</table>
<table style="width:31%;">
<colgroup>
<col width="15%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Variance</th>
<th align="center">StdDev</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.332</td>
<td align="center">0.577</td>
</tr>
<tr class="even">
<td align="center">0.067</td>
<td align="center">0.258</td>
</tr>
<tr class="odd">
<td align="center">0.908</td>
<td align="center">0.953</td>
</tr>
</tbody>
</table>
<table style="width:10%;">
<colgroup>
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Phi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.67</td>
</tr>
</tbody>
</table>
<p>The results show that the primary regression coefficients, known in the mixed model literature as ‘fixed effects’, are reasonably recovered, as are the standard deviations for the random effects (recall <code>intsd</code>, <code>timesd</code>, and <code>sigmasq</code>). In addition, <code>Phi</code> estimates what we were calling <code>rho</code>. Furthermore, there is a low estimated correlation between intercepts and slopes (not shown), in keeping with how the data was generated.</p>
<p>A common method for determining whether to use the FE vs. RE is the <span class="emph">Hausman test</span>, but it comes with its own assumptions and the standard version is problematic except in the simplest of settings. The plm package provides this if you want to try it, but will only be applicable to the random intercepts scenario. It tests whether the assumption underlying the random effects approach is viable, and if rejected, one would go with the FE model. As it is an ‘accept the null’ test, it is fundamentally illogical, to go along with the other issues.</p>
<p>It may be instructive to compare the random coefficients to the approach where we conducted a model for each individual.</p>
<p><img src="clustered_files/figure-html/compareMixedByGroup-1.svg" width="75%" style="display: block; margin: auto;" /></p>
<p><br></p>
<p>What the visualization makes clear is that the mixed model has a regularizing effect on the coefficients relative to the by-group model, shrinking the coefficients toward the population average. The by-group approach overfits, treating each individual as a unique snowflake, while the mixed model recognizes that they might have things in common. Practically and philosophically this is quite appealing.</p>
<div id="pros-5" class="section level2">
<h2>Pros</h2>
<ul>
<li>Examine cluster-specific effects</li>
<li>Can retain cluster level variable effects</li>
<li>More efficient than FE (and cluster robust approach) if assumptions hold</li>
<li>Easily incorporate additional sources of variance</li>
<li>Additional sources of variance may be due to nested or crossed grouping structure and even interactions of random effects</li>
<li>Can model residual dependency</li>
<li>Can allow any coefficient to be ‘random’</li>
<li>Close ties to other modeling approaches</li>
</ul>
</div>
<div id="cons-5" class="section level2">
<h2>Cons</h2>
<ul>
<li>Inconsistent estimates if predictors are correlated with random effect(s) and other steps not taken</li>
<li>May have difficult estimation in the generalized case, e.g. logistic model</li>
</ul>
<p>Gist: Basically the mixed model can provide everything you need, and not necessarily at the cost of consistency.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="12">
<li id="fn12"><p>Such as spatial random effects, additive models, network effects etc. See the Fahrmeier et al. reference.<a href="mixed-models.html#fnref12" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="fixed-effects-models.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="gee.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["twitter", "facebook", "google", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"depth": 2,
"scroll_highlight": true
},
"df_print": "kable",
"highlight": "pygments",
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
